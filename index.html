<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Sketch</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>

  <body>
    <div id="container-main">
      <div id="container-title-body-controls">
        <div id="container-title">
          <h1>Sketch Game</h1>
        </div>

        <div id="container-controls">
          <button id="number-of-squares">Number of Squares</button>
          <button id="random-colours">Random Colours</button>
          <button id="degrees-of-black">Degrees of Black</button>
          <button id="black">Black</button>          
          <button id="white">White</button>
        </div>

        <div id="container-body"></div>
      </div>
    </div>


    <script>
      //Choose number of squares
      let squQty = 1;
      
      function getSquQty() {        
      squQty = prompt("Type a number between 1 to 100", "");

        //Use if cancel prompt
        if(squQty === null){
          alert('You cancelled.');
        }
        //Is not a number
        else if (isNaN(squQty)) {
          alert("Please type a number");
          getSquQty();
        }
        //Is not between 1 and 100
        else if(squQty < 1 || squQty > 100 ){
          alert('Please type a number between 1 and 100');
          getSquQty();
        }
        //Turn number into string and round
        else{
          squQty = Math.round((squQty));
        }

      }

      getSquQty();

      //Create square variables
      const width = 500;
      const height = 500;
      const areaFull = width * height;

      const areaOne = areaFull / squQty;
      const w = Math.sqrt(areaOne);
      const h = Math.sqrt(areaOne);

      const containerBody = document.querySelector("#container-body");
      for (let i = 0; i < squQty; i++) {
        const divs = document.createElement("div");
        divs.className = "squares";
        containerBody.appendChild(divs);
      }

      const squares = document.querySelectorAll(".squares");
      const btns = document.querySelectorAll("button");

      //Switches to turn colours on and off
      //Default colour is black
      let blackSwitch = true;
      let randomColourSwitch = false;
      let degreesOfBlackSwitch = false;
      let whiteSwitch = false;

      function updateBtns() {
        if (this.id === "random-colours") {
          randomColourSwitch = true;
          blackSwitch = false;
          degreesOfBlackSwitch = false;
          whiteSwitch = false;
        } else if (this.id === "degrees-of-black") {
          randomColourSwitch = false;
          blackSwitch = false;
          degreesOfBlackSwitch = true;
          whiteSwitch = false;
        } else if (this.id === "black") {
          randomColourSwitch = false;
          blackSwitch = true;
          degreesOfBlackSwitch = false;
          whiteSwitch = false;
        } else if (this.id === "white") {
          randomColourSwitch = false;
          blackSwitch = false;
          degreesOfBlackSwitch = false;
          whiteSwitch = true;
        }else if(this.id === 'number-of-squares'){
          getSquQty();
      }
    }
      btns.forEach((btn) => btn.addEventListener("click", updateBtns));

      let changeBlackness = true;

      let blackness = 110;

      function changeColour(e) {
        //Random Colours
        if (randomColourSwitch) {
          randomColour = Math.floor(Math.random() * 361);
          e.target.style.backgroundColor = `hsl(${randomColour}, 100%, 50%)`;
          //this.setAttribute('style', 'background-color: red');
        }

        //Degrees of Blackness
        if (degreesOfBlackSwitch) {
          if (changeBlackness === true) {
            blackness = blackness - 10;
            if (blackness < 10) {
              changeBlackness = false;
            }
          }

          if (changeBlackness === false) {
            blackness = blackness + 10;
            if (blackness > 100) {
              changeBlackness = true;
            }
          }
          this.style.backgroundColor = `hwb(0 ${blackness}% 100%)`;
        }
        //Black switch
        if (blackSwitch) {
          this.style.backgroundColor = "black";
        }
        //White switch
        if (whiteSwitch) {
          this.style.backgroundColor = "white";
        }
      }

      squares.forEach((square) => {
        square.style.width = `${w}px`;
        square.style.height = `${h}px`;
        square.addEventListener("mouseover", changeColour);
      });
    </script>
  </body>
</html>
